{"version":3,"file":"hellortc.min.js","sources":["hellortc.js"],"names":["trace","text","length","substring","console","log","performance","now","toFixed","HELLORTC_DEBUG","window","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCSessionDescription","mozRTCSessionDescription","URL","webkitURL","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","attachMediaStream","reattachMediaStream","webrtcDetectedBrowser","webrtcDetectedVersion","parseInt","userAgent","match","RTCIceCandidate","mozRTCIceCandidate","bind","createIceServer","url","username","password","iceServer","url_parts","split","indexOf","turn_url_parts","credential","element","stream","mozSrcObject","play","to","from","MediaStream","prototype","getVideoTracks","getAudioTracks","srcObject","src","createObjectURL","Hello","options","this","_events","peerConfig","iceServers","pcConstraints","optional","DtlsSrtpKeyAgreement","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","MozDontOfferDataChannel","socket","_sdpConstraints","io","connect","peerConnection","createAnswer","answer","setLocalDescription","emit","onaddstream","event","remote","remoteCallback","onicecandidate","candidate","onopen","arguments","on","offer","setRemoteDescription","addIceCandidate","sdpMLineIndex","uid","pendingCalls","Date","eventName","callback","register","call","config","audio","video","local","callbacks","onSuccessMedia","addStream","onErrorMedia","error","cid","createOffer"],"mappings":"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"}