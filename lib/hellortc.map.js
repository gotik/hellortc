{"version":3,"file":"hellortc.min.js","sources":["hellortc.js"],"names":["trace","text","length","substring","console","log","performance","now","toFixed","HELLORTC_DEBUG","window","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCSessionDescription","mozRTCSessionDescription","URL","webkitURL","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","attachMediaStream","reattachMediaStream","webrtcDetectedBrowser","webrtcDetectedVersion","parseInt","userAgent","match","RTCIceCandidate","mozRTCIceCandidate","bind","createIceServer","url","username","password","iceServer","url_parts","split","indexOf","turn_url_parts","credential","element","stream","mozSrcObject","play","to","from","MediaStream","prototype","getVideoTracks","getAudioTracks","srcObject","src","createObjectURL","Hello","options","this","_events","peerConfig","iceServers","mediaConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","optional","DtlsSrtpKeyAgreement","MozDontOfferDataChannel","socket","_mediaConstraints","io","connect","peerConnection","createAnswer","answer","setLocalDescription","emit","onaddstream","event","remote","remoteCallback","onicecandidate","candidate","onopen","arguments","on","offer","setRemoteDescription","addIceCandidate","uid","pendingCalls","Date","eventName","callback","register","call","config","audio","video","local","callbacks","onSuccessMedia","addStream","onErrorMedia","error","cid","createOffer"],"mappings":"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"}