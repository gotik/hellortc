{"version":3,"file":"hellortc.min.js","sources":["hellortc.js"],"names":["trace","text","length","substring","console","log","performance","now","toFixed","HELLORTC_DEBUG","window","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCSessionDescription","mozRTCSessionDescription","URL","webkitURL","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","attachMediaStream","reattachMediaStream","webrtcDetectedBrowser","webrtcDetectedVersion","parseInt","userAgent","match","RTCIceCandidate","mozRTCIceCandidate","bind","createIceServer","url","username","password","iceServer","url_parts","split","indexOf","turn_url_parts","credential","element","stream","mozSrcObject","play","to","from","MediaStream","prototype","getVideoTracks","getAudioTracks","srcObject","src","createObjectURL","Hello","options","this","_events","peerConfig","iceServers","pcConstraints","optional","DtlsSrtpKeyAgreement","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","MozDontOfferDataChannel","socket","_sdpConstraints","io","connect","peerConnection","createAnswer","answer","setLocalDescription","emit","onaddstream","event","remote","remoteCallback","onicecandidate","candidate","onopen","arguments","on","offer","setRemoteDescription","addIceCandidate","uid","pendingCalls","Date","eventName","callback","register","call","config","audio","video","local","callbacks","onSuccessMedia","addStream","onErrorMedia","error","cid","createOffer"],"mappings":"AA4BA,QAASA,OAAMC,GAEgB,MAAzBA,EAAKA,EAAKC,OAAS,KACrBD,EAAOA,EAAKE,UAAU,EAAGF,EAAKC,OAAS,IAEzCE,QAAQC,KAAKC,YAAYC,MAAQ,KAAMC,QAAQ,GAAK,KAAOP,GAjC7DQ,gBAAiB,EAIjBC,OAAOC,kBAAoBD,OAAOE,yBAA2BF,OAAOG,qBAKpEH,OAAOI,sBAAwBJ,OAAOK,0BAA4BL,OAAOI,sBAKzEJ,OAAOM,IAAMN,OAAOM,KAAON,OAAOO,UAKlCC,UAAUC,aAAeD,UAAUE,oBAAsBF,UAAUG,eAEnE,IAAIV,mBAAoB,KACpBQ,aAAe,KACfG,kBAAoB,KACpBC,oBAAsB,KACtBC,sBAAwB,KACxBC,sBAAwB,IAUxBP,WAAUG,iBACZjB,QAAQC,IAAI,8BAEZmB,sBAAwB,UAExBC,sBACSC,SAASR,UAAUS,UAAUC,MAAM,uBAAuB,GAAI,IAGvEjB,kBAAoBE,qBAGpBC,sBAAwBC,yBAGxBc,gBAAkBC,mBAIlBX,aAAeD,UAAUG,gBAAgBU,KAAKb,WAG9Cc,gBAAkB,SAASC,EAAKC,EAAUC,GACxC,GAAIC,GAAY,KACZC,EAAYJ,EAAIK,MAAM,IAC1B,IAAqC,IAAjCD,EAAU,GAAGE,QAAQ,QAEvBH,GAAcH,IAAOA,OAChB,IAAqC,IAAjCI,EAAU,GAAGE,QAAQ,QAC9B,GAA4B,GAAxBd,sBAA4B,CAG9B,GAAIe,GAAiBP,EAAIK,MAAM,IAEoB,KAA/CE,EAAe,GAAGD,QAAQ,mBAC5BH,GAAcH,IAAOO,EAAe,GACtBC,WAAcN,EACdD,SAAYA,QAK5BE,IAAcH,IAAOA,EACPQ,WAAcN,EACdD,SAAYA,EAG9B,OAAOE,IAITd,kBAAoB,SAASoB,EAASC,GACpCvC,QAAQC,IAAI,0BACZqC,EAAQE,aAAeD,EACvBD,EAAQG,QAGVtB,oBAAsB,SAASuB,EAAIC,GACjC3C,QAAQC,IAAI,4BACZyC,EAAGF,aAAeG,EAAKH,aACvBE,EAAGD,QAILG,YAAYC,UAAUC,eAAiB,WACrC,UAGFF,YAAYC,UAAUE,eAAiB,WACrC,WAEOjC,UAAUE,oBACnBhB,QAAQC,IAAI,6BAEZmB,sBAAwB,SACxBC,sBACOC,SAASR,UAAUS,UAAUC,MAAM,4BAA4B,GAAI,IAG1EI,gBAAkB,SAASC,EAAKC,EAAUC,GACxC,GAAIC,GAAY,KACZC,EAAYJ,EAAIK,MAAM,IAU1B,OATqC,KAAjCD,EAAU,GAAGE,QAAQ,QAEvBH,GAAcH,IAAOA,GACqB,IAAjCI,EAAU,GAAGE,QAAQ,UAE9BH,GAAcH,IAAOA,EACPQ,WAAcN,EACdD,SAAYA,IAErBE,GAITzB,kBAAoBC,wBAIpBO,aAAeD,UAAUE,mBAAmBW,KAAKb,WAGjDI,kBAAoB,SAASoB,EAASC,GACH,mBAAtBD,GAAQU,UACjBV,EAAQU,UAAYT,EACqB,mBAAzBD,GAAQE,aACxBF,EAAQE,aAAeD,EACS,mBAAhBD,GAAQW,IACxBX,EAAQW,IAAMrC,IAAIsC,gBAAgBX,GAElCvC,QAAQC,IAAI,uCAIhBkB,oBAAsB,SAASuB,EAAIC,GACjCD,EAAGO,IAAMN,EAAKM,MAGhBjD,QAAQC,IAAI,+CAiBd,IAAIkD,OAAQ,SAASC,GACpBC,KAAKD,QAAUA,EACfC,KAAKC,UAGL,IAAIC,IACHC,aACG3B,IAAK,kCAGL4B,GACHC,WAEEC,sBAAsB,KAIrBC,GACHC,WACCC,qBAAqB,EACrBC,qBAAqB,GAIO,aAA1B3C,wBACHmC,EAAWC,aACR3B,IAAK,uBAGR+B,GACCC,WACCC,qBAAqB,EACrBC,qBAAqB,EACrBC,yBAAyB,KAM5BZ,EAAQa,OAASb,EAAQa,QAAU,GACnCV,EAAWC,WAAaJ,EAAQI,YAAcD,EAAWC,WAEzDH,KAAKa,gBAAkBN,CAEvB,IAAIK,GAAmC,gBAAnBb,GAAQa,OAAsBE,GAAGC,QAAQhB,EAAQa,QAAUb,EAAQa,OACnFI,EAAiB,GAAI9D,mBACxBgD,EACAE,GAGGa,EAAe,SAASC,GACvBlE,gBAAgBL,QAAQC,IAAI,iBAAkBsE,GAClDF,EAAeG,oBAAoBD,GAEnCN,EAAOQ,KAAK,eAAgBF,GAG7BF,GAAeK,YAAc,SAASC,GACrC,GAAI1B,GAAMrC,IAAIsC,gBAAgByB,EAAMpC,OAChClC,iBAAgBL,QAAQC,IAAI,gBAAiB0E,GAE7CtB,KAAKD,QAAQwB,QAChB1D,kBAAkBmC,KAAKD,QAAQwB,OAAQD,EAAMpC,QAG1Cc,KAAKD,QAAQyB,gBAChBxB,KAAKD,QAAQyB,eAAe5B,IAE5BtB,KAAK0B,MAEPgB,EAAeS,eAAiB,SAASH,GACpCtE,gBAAgBL,QAAQC,IAAI,YAAa0E,GACzCA,EAAMI,YACTd,EAAOQ,KAAK,YAAaE,EAAMI,WAC/BV,EAAeS,eAAiB,OAIlCT,EAAeW,OAAS,WACnB3E,gBAAgBL,QAAQC,IAAI,OAAQgF,YAGzChB,EAAOiB,GAAG,cAAe,SAASC,GAC7B9E,gBAAgBL,QAAQC,IAAI,QAASkF,GACzCd,EAAee,qBAAqB,GAAI1E,uBAAsByE,IAE9Dd,EAAeC,aAAaA,EAAc,aAAejB,KAAKa,kBAC7DvC,KAAK0B,OAEPY,EAAOiB,GAAG,eAAgB,SAASX,GAC9BlE,gBAAgBL,QAAQC,IAAI,SAAUsE,GAC1CF,EAAee,qBAAqB,GAAI1E,uBAAsB6D,KAC7D5C,KAAK0B,OAEPY,EAAOiB,GAAG,YAAa,SAASH,GAC3B1E,gBAAgBL,QAAQC,IAAI,aAAc8E,GAC9CV,EAAegB,gBAAgB,GAAI5D,iBAAgBsD,MAGpDd,EAAOiB,GAAG,aAAc,SAASI,GAC5BjF,gBAAgBL,QAAQC,IAAIqF,EAAK,kBACrCjC,KAAKkC,aAAaD,GAAO,GAAIE,MACzBnC,KAAKC,QAAc,MACtBD,KAAKC,QAAc,KAAEgC,IAErB3D,KAAK0B,OAEPY,EAAOiB,GAAG,mBAAoB,SAASI,GAClCjF,gBAAgBL,QAAQC,IAAIqF,EAAK,eACjCjC,KAAKC,QAAoB,YAC5BD,KAAKC,QAAoB,WAAEgC,GAGxBjC,KAAKD,QAAQwB,SAChBvB,KAAKD,QAAQwB,OAAO3B,IAAM,IAGvBI,KAAKD,QAAQyB,gBAChBxB,KAAKD,QAAQyB,eAAe,KAE5BlD,KAAK0B,OAGPA,KAAKY,OAASA,EACdZ,KAAKd,OAAS,KACdc,KAAKkC,gBACLlC,KAAKgB,eAAiBA,EAQvBlB,OAAMN,UAAUqC,GAAK,SAASO,EAAWC,GACxCrC,KAAKC,QAAQmC,GAAaC,GAO3BvC,MAAMN,UAAU8C,SAAW,SAASL,GACnCjC,KAAKY,OAAOQ,KAAK,iBAAkBa,IAYpCnC,MAAMN,UAAU+C,KAAO,SAASN,EAAKlC,GAEpC,GAAIyC,IACHC,OAAO,EACPC,OAAO,EAGR3C,GAAUA,MAENA,EAAQwB,SACXvB,KAAKD,QAAQwB,OAASxB,EAAQwB,QAG3BxB,EAAQ4C,QACX3C,KAAKD,QAAQ4C,MAAQ5C,EAAQ4C,OAG1B5C,EAAQ6C,YACX5C,KAAKD,QAAQyB,eAAiBzB,EAAQ6C,UAAUrB,OAGjD,IAAIsB,GAAiB,SAAS3D,GAC7B,GAAIU,GAAMrC,IAAIsC,gBAAgBX,EAG9Bc,MAAKd,OAASA,EAEdc,KAAKgB,eAAe8B,UAAU9C,KAAKd,QAE/Bc,KAAKD,QAAQ4C,OAChB9E,kBAAkBmC,KAAKD,QAAQ4C,MAAOzD,GAGnCa,EAAQ6C,WAAa7C,EAAQ6C,UAAUD,OAA4C,kBAA5B5C,GAAQ6C,UAAUD,OAC5E5C,EAAQ6C,UAAUD,MAAM/C,GAGzBI,KAAKY,OAAOQ,KAAK,aAAca,IAC9B3D,KAAK0B,MAEH+C,EAAe,WAClBpG,QAAQqG,MAAMpB,WAGfnE,WAAUC,aAAa8E,EAAQK,EAAgBE,IAQhDjD,MAAMN,UAAU0B,OAAS,SAASe,EAAKlC,GACtC,GAAIkD,GAAMjD,KAAKkC,aAAaD,GAExBO,GACHC,OAAO,EACPC,OAAO,EAiBR,IAdA3C,EAAUA,MAENA,EAAQwB,SACXvB,KAAKD,QAAQwB,OAASxB,EAAQwB,QAG3BxB,EAAQ4C,QACX3C,KAAKD,QAAQ4C,MAAQ5C,EAAQ4C,OAG1B5C,EAAQ6C,YACX5C,KAAKD,QAAQyB,eAAiBzB,EAAQ6C,UAAUrB,QAG7C0B,EAAK,CACR,GAAIJ,GAAiB,SAAS3D,GAC7B,GAAIU,GAAMrC,IAAIsC,gBAAgBX,EAG9Bc,MAAKd,OAASA,EAEVc,KAAKD,QAAQ4C,OAChB9E,kBAAkBmC,KAAKD,QAAQ4C,MAAM/C,IAAKV,GAGvCa,EAAQ6C,WAAa7C,EAAQ6C,UAAUD,OAA4C,kBAA5B5C,GAAQ6C,UAAUD,OAC5E5C,EAAQ6C,UAAUD,MAAM/C,GAGzBI,KAAKgB,eAAe8B,UAAU9C,KAAKd,QAEnCc,KAAKgB,eAAekC,YAAY,SAASpB,GACxC9B,KAAKgB,eAAeG,oBAAoBW,GACxC9B,KAAKY,OAAOQ,KAAK,cAAeU,IAC/BxD,KAAK0B,MAAO,aAAeA,KAAKa,kBAGjCvC,KAAK0B,MAEH+C,EAAe,WAClBpG,QAAQqG,MAAMpB,WAGfnE,WAAUC,aAAa8E,EAAQK,EAAgBE"}