{"version":3,"file":"hellortc.min.js","sources":["hellortc.js"],"names":["trace","text","length","substring","console","log","performance","now","toFixed","DEBUG","window","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCSessionDescription","mozRTCSessionDescription","URL","webkitURL","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","attachMediaStream","reattachMediaStream","webrtcDetectedBrowser","webrtcDetectedVersion","parseInt","userAgent","match","RTCIceCandidate","mozRTCIceCandidate","bind","createIceServer","url","username","password","iceServer","url_parts","split","indexOf","turn_url_parts","credential","element","stream","mozSrcObject","play","to","from","MediaStream","prototype","getVideoTracks","getAudioTracks","srcObject","src","createObjectURL","Hello","options","this","_events","peerConfig","iceServers","mediaConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","optional","DtlsSrtpKeyAgreement","MozDontOfferDataChannel","socket","_mediaConstraints","io","connect","peerConnection","createAnswer","answer","setLocalDescription","emit","onaddstream","event","remote","remoteCallback","onicecandidate","candidate","onopen","on","offer","setRemoteDescription","addIceCandidate","uid","pendingCalls","Date","eventName","callback","register","call","config","audio","video","local","callbacks","onSuccessMedia","addStream","onErrorMedia","error","arguments","cid","createOffer"],"mappings":"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"}