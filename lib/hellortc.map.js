{"version":3,"file":"hellortc.min.js","sources":["hellortc.js"],"names":["trace","text","length","substring","console","log","performance","now","toFixed","window","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCSessionDescription","mozRTCSessionDescription","URL","webkitURL","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","attachMediaStream","reattachMediaStream","webrtcDetectedBrowser","webrtcDetectedVersion","parseInt","userAgent","match","RTCIceCandidate","mozRTCIceCandidate","bind","createIceServer","url","username","password","iceServer","url_parts","split","indexOf","turn_url_parts","credential","element","stream","mozSrcObject","play","to","from","MediaStream","prototype","getVideoTracks","getAudioTracks","srcObject","src","createObjectURL","Hello","options","this","_events","peerConfig","iceServers","mediaConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","optional","DtlsSrtpKeyAgreement","MozDontOfferDataChannel","socket","io","connect","peerConnection","createAnswer","answer","setLocalDescription","emit","onaddstream","event","remote","remoteCallback","onicecandidate","candidate","onopen","on","offer","setRemoteDescription","addIceCandidate","uid","pendingCalls","Date","eventName","callback","register","call","config","audio","video","local","callbacks","onSuccessMedia","addStream","onErrorMedia","error","arguments","cid","createOffer"],"mappings":"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"}